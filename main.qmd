---
title: "AMR-Hub Demo and Discussion"
author: "Keiran Suchak"
date: 2026-01-30
format:
  revealjs:
    footer: "Keiran Suchak - University of Leeds"
    slide-number: h.v
    chalkboard: true
    mermaid:
      theme: neutral
---

```{python}
import geopandas as gpd
import pandas as pd
```

# Topics

## Topics

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG)
        B(RCD<br>CSV/DB)
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML)

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Topics - Floorplans

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG):::highlight
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM):::highlight
        E(ML)

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Topics - Problem framing

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG)
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML)

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories):::highlight
            G(Co-location / Interaction):::highlight
            H(Infection transmission):::highlight

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Topics - ML for synthetic trajectories

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG):::highlight
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML):::highlight

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories):::highlight
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Topics - Temporal sequence modelling

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG)
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML):::highlight

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks):::highlight

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

# Floorplans

## Floorplans

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG):::highlight
        B(RCD<br>CSV/DB)
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML)

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Floorplans

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG):::highlight
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML)

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Floorplans - RCD {.smaller}

```{python}
df = pd.read_csv("http://localhost:8000/location_timeseries.csv")
df.head()
```

## Floorplans - RCD

- <a href="http://localhost:8000/ega02.pdf" target="_blank">Floorplan PDF</a>
- Attaching spatial points to RCD
  - `regex`: matching to standardised location tags
  - Medical gas pipes: identifying bed locations on ward

## Floorplans

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG):::highlight
        B(RCD<br>CSV/DB)
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM):::highlight
        E(ML):::highlight

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Floorplans

- `cadflow` docker image:

```{mermaid}
flowchart LR
    subgraph " "
        direction LR
        A(.dwg)
        B(.dxf)
        C(.gpkg)

        A --> B
        B --> C
    end
```
- Visualise

## Floorplans

- <a href="http://localhost:8000/ega02.html" target="_blank">Floorplan HTML</a>
- But this just provides linestrings - we need tagged polygons!
- Potential next steps:
  - Autodesk Revit: Extracting polygons
  - Extension:
```{mermaid}
flowchart LR
    subgraph " "
        direction LR
        B(" ")
        C(.gpkg)
        D(.yaml)

        B --> C
        C --> D
    end
```

# Simulation under uncertainty - problem framing

## Simulation under uncertainty

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;


    subgraph Data
        direction TB

        A(Floorplan<br>DWG)
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML)

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories):::highlight
            G(Co-location / Interaction):::highlight
            H(Infection transmission):::highlight

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Simulation under uncertainty

# ML for synthetic trajectory generation

## ML for synthetic trajectory generation

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;


    subgraph Data
        direction TB

        A(Floorplan<br>DWG):::highlight
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML):::highlight

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks)

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories):::highlight
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

# Temporal sequence modelling

## Temporal sequence modelling

```{mermaid}
flowchart LR
    classDef highlight fill:#ffcc00,stroke:#333,stroke-width:2px;

    subgraph Data
        direction TB

        A(Floorplan<br>DWG)
        B(RCD<br>CSV/DB):::highlight
        C(Wearables<br>CSV/DB?)

        A --- B
        B --- C
    end

    subgraph Models
        direction TB

        D(ABM)
        E(ML):::highlight

        D ~~~ E
    end

    subgraph Outputs
        direction TB

        I(Early warning<br>indicator for<br>infection outbreaks):::highlight

        subgraph "Simulation under uncertainty"
            direction TB
            F(Synthetic trajectories)
            G(Co-location / Interaction)
            H(Infection transmission)

            F --> G
            G --> H

        end

    end

    Data --- Models
    Models --- Outputs
```

## Temporal sequence modelling - objective

> Develop an analytics pipeline that detects behavioural pre-cursors to
> infection outbreaks and produces an early-warning risk indicator at the
> team/role level.

## Temporal sequence modelling - hypotheses

- **H1** - Specific short-term sequences increase the instantaneous hazard of
  entering an outbreak.
- **H2** - Seniority / role modulates the strength of pre-cursors.

## Temporal sequence modelling - methods {.smaller}

## Temporal sequence modelling
